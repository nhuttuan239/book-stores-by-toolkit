{"ast":null,"code":"var _jsxFileName = \"/Users/macbookpro/Documents/Cder/reactJS/M2.3/redux-book-store-toolkit/src/pages/HomePage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { ClipLoader } from \"react-spinners\";\nimport { useNavigate } from \"react-router-dom\";\nimport PaginationBar from \"../components/PaginationBar\";\nimport SearchForm from \"../components/SearchForm\";\nimport { FormProvider } from \"../form\";\nimport { useForm } from \"react-hook-form\";\nimport { Container, Alert, Box, Card, Stack, CardMedia, CardActionArea, Typography, CardContent } from \"@mui/material\";\nimport { fetchData } from \"../components/book/bookSlice.js\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND_API = process.env.REACT_APP_BACKEND_API;\n\nconst HomePage = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const status = useSelector(state => state.book.status);\n  const books = useSelector(state => state.book.books);\n  const [pageNum, setPageNum] = useState(1);\n  const [query, setQuery] = useState(\"\");\n  const totalPage = 10;\n  const limit = 10;\n  const navigate = useNavigate();\n\n  const handleClickBook = bookId => {\n    navigate(`/books/${bookId}`);\n  };\n\n  useEffect(() => {\n    dispatch(fetchData({\n      pageNum,\n      limit: 20,\n      query\n    }));\n    console.log(\"qury\", query);\n  }, [dispatch, pageNum, limit, query]); //--------------form\n\n  const defaultValues = {\n    searchQuery: \"\"\n  };\n  const methods = useForm({\n    defaultValues\n  });\n  const {\n    handleSubmit\n  } = methods;\n\n  const onSubmit = data => {\n    setQuery(data.searchQuery);\n  }; //----------------\n\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Stack, {\n      sx: {\n        display: \"flex\",\n        alignItems: \"center\",\n        m: \"2rem\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h3\",\n        sx: {\n          textAlign: \"center\"\n        },\n        children: \"Book Store\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), status && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        children: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(FormProvider, {\n        methods: methods,\n        onSubmit: handleSubmit(onSubmit),\n        children: /*#__PURE__*/_jsxDEV(Stack, {\n          spacing: 2,\n          direction: {\n            xs: \"column\",\n            sm: \"row\"\n          },\n          alignItems: {\n            sm: \"center\"\n          },\n          justifyContent: \"space-between\",\n          mb: 2,\n          children: /*#__PURE__*/_jsxDEV(SearchForm, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PaginationBar, {\n        pageNum: pageNum,\n        setPageNum: setPageNum,\n        totalPageNum: totalPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: status ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          textAlign: \"center\",\n          color: \"primary.main\"\n        },\n        children: /*#__PURE__*/_jsxDEV(ClipLoader, {\n          color: \"inherit\",\n          size: 150,\n          loading: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"row\",\n        spacing: 2,\n        justifyContent: \"space-around\",\n        flexWrap: \"wrap\",\n        children: books === null || books === void 0 ? void 0 : books.map(book => /*#__PURE__*/_jsxDEV(Card, {\n          onClick: () => handleClickBook(book.id),\n          sx: {\n            width: \"12rem\",\n            height: \"27rem\",\n            marginBottom: \"2rem\"\n          },\n          children: /*#__PURE__*/_jsxDEV(CardActionArea, {\n            children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n              component: \"img\",\n              image: `${BACKEND_API}/${book.imageLink}`,\n              alt: `${book.title}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                gutterBottom: true,\n                variant: \"h5\",\n                component: \"div\",\n                children: `${book.title}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 17\n          }, this)\n        }, book.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(HomePage, \"5NLFwdiouRKLf1+VvXjpF2avdpk=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useNavigate, useForm];\n});\n\n_c = HomePage;\nexport default HomePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useState","useEffect","ClipLoader","useNavigate","PaginationBar","SearchForm","FormProvider","useForm","Container","Alert","Box","Card","Stack","CardMedia","CardActionArea","Typography","CardContent","fetchData","useDispatch","useSelector","BACKEND_API","process","env","REACT_APP_BACKEND_API","HomePage","dispatch","status","state","book","books","pageNum","setPageNum","query","setQuery","totalPage","limit","navigate","handleClickBook","bookId","console","log","defaultValues","searchQuery","methods","handleSubmit","onSubmit","data","display","alignItems","m","textAlign","xs","sm","color","map","id","width","height","marginBottom","imageLink","title"],"sources":["/Users/macbookpro/Documents/Cder/reactJS/M2.3/redux-book-store-toolkit/src/pages/HomePage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ClipLoader } from \"react-spinners\";\nimport { useNavigate } from \"react-router-dom\";\nimport PaginationBar from \"../components/PaginationBar\";\nimport SearchForm from \"../components/SearchForm\";\nimport { FormProvider } from \"../form\";\nimport { useForm } from \"react-hook-form\";\nimport {\n  Container,\n  Alert,\n  Box,\n  Card,\n  Stack,\n  CardMedia,\n  CardActionArea,\n  Typography,\n  CardContent,\n} from \"@mui/material\";\nimport { fetchData } from \"../components/book/bookSlice.js\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst BACKEND_API = process.env.REACT_APP_BACKEND_API;\n\nconst HomePage = () => {\n  const dispatch = useDispatch();\n  const status = useSelector((state) => state.book.status);\n  const books = useSelector((state) => state.book.books);\n  const [pageNum, setPageNum] = useState(1);\n  const [query, setQuery] = useState(\"\");\n  const totalPage = 10;\n  const limit = 10;\n\n  const navigate = useNavigate();\n  const handleClickBook = (bookId) => {\n    navigate(`/books/${bookId}`);\n  };\n\n  useEffect(() => {\n    dispatch(fetchData({ pageNum, limit: 20, query }));\n    console.log(\"qury\", query);\n  }, [dispatch, pageNum, limit, query]);\n\n  //--------------form\n  const defaultValues = {\n    searchQuery: \"\",\n  };\n  const methods = useForm({\n    defaultValues,\n  });\n  const { handleSubmit } = methods;\n  const onSubmit = (data) => {\n    setQuery(data.searchQuery);\n  };\n  //----------------\n\n  return (\n    <Container>\n      <Stack sx={{ display: \"flex\", alignItems: \"center\", m: \"2rem\" }}>\n        <Typography variant=\"h3\" sx={{ textAlign: \"center\" }}>\n          Book Store\n        </Typography>\n        {status && <Alert severity=\"error\">{status}</Alert>}\n        <FormProvider methods={methods} onSubmit={handleSubmit(onSubmit)}>\n          <Stack\n            spacing={2}\n            direction={{ xs: \"column\", sm: \"row\" }}\n            alignItems={{ sm: \"center\" }}\n            justifyContent=\"space-between\"\n            mb={2}\n          >\n            <SearchForm />\n          </Stack>\n        </FormProvider>\n        <PaginationBar\n          pageNum={pageNum}\n          setPageNum={setPageNum}\n          totalPageNum={totalPage}\n        />\n      </Stack>\n      <div>\n        {status ? (\n          <Box sx={{ textAlign: \"center\", color: \"primary.main\" }}>\n            <ClipLoader color=\"inherit\" size={150} loading={true} />\n          </Box>\n        ) : (\n          <Stack\n            direction=\"row\"\n            spacing={2}\n            justifyContent=\"space-around\"\n            flexWrap=\"wrap\"\n          >\n            {books?.map((book) => (\n              <Card\n                key={book.id}\n                onClick={() => handleClickBook(book.id)}\n                sx={{\n                  width: \"12rem\",\n                  height: \"27rem\",\n                  marginBottom: \"2rem\",\n                }}\n              >\n                <CardActionArea>\n                  <CardMedia\n                    component=\"img\"\n                    image={`${BACKEND_API}/${book.imageLink}`}\n                    alt={`${book.title}`}\n                  />\n                  <CardContent>\n                    <Typography gutterBottom variant=\"h5\" component=\"div\">\n                      {`${book.title}`}\n                    </Typography>\n                  </CardContent>\n                </CardActionArea>\n              </Card>\n            ))}\n          </Stack>\n        )}\n      </div>\n    </Container>\n  );\n};\n\nexport default HomePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}