{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport api from \"../../apiService.js\";\nimport { fetchBooks } from \"./bookAPI\";\nimport { toast } from \"react-toastify\";\nconst initialState = {\n  books: [],\n  readinglist: [],\n  bookDetail: null,\n  status: null\n};\nexport const addToReadingList = createAsyncThunk(\"book/addToReadingList\", async book => {\n  const response = await api.post(`/favorites`, book);\n  return response.data;\n});\nexport const getReadingList = createAsyncThunk(\"book/getReadingList\", async () => {\n  const response = await api.get(`/favorites`);\n  return response.data;\n});\nexport const removeBook = createAsyncThunk(\"book/removeBook\", async removedBookId => {\n  const response = await api.delete(`/favorites/${removedBookId}`);\n  console.log(response);\n  return response.data;\n});\nexport const getBookDetail = createAsyncThunk(\"book/getBookDetail\", async bookId => {\n  const response = await api.get(`/books/${bookId}`);\n  return response.data;\n});\nexport const fetchData = createAsyncThunk(\"book/fetchData\", async props => {\n  const response = await fetchBooks(props);\n  return response.data;\n});\nexport const bookSlice = createSlice({\n  name: \"book\",\n  initialState,\n  extraReducers: builder => {\n    builder.addCase(fetchData.pending, state => {\n      state.status = \"loading\";\n    }).addCase(fetchData.fulfilled, (state, action) => {\n      state.status = null;\n      state.books = action.payload;\n    }).addCase(fetchData.rejected, (state, action) => {\n      state.status = \"failed\";\n    });\n    builder.addCase(addToReadingList.pending, state => {}).addCase(addToReadingList.fulfilled, (state, action) => {\n      console.log(action.payload);\n      toast.success(\"The book has been added to the reading list!\");\n    }).addCase(addToReadingList.rejected, (state, action) => {\n      toast.error(action.error.message);\n    });\n    builder.addCase(getReadingList.pending, state => {\n      state.status = \"pending\";\n    }).addCase(getReadingList.fulfilled, (state, action) => {\n      state.status = null;\n      state.readinglist = action.payload;\n    }).addCase(getReadingList.rejected, (state, action) => {\n      state.status = \"failed\";\n    });\n    builder.addCase(removeBook.pending, state => {\n      state.status = \"pending\";\n    }).addCase(removeBook.fulfilled, (state, action) => {\n      state.status = null;\n      toast.success(\"The book has been removed\");\n    }).addCase(removeBook.rejected, (state, action) => {\n      state.status = \"Failed to remove book\";\n    });\n    builder.addCase(getBookDetail.pending, state => {\n      state.status = \"pending\";\n    }).addCase(getBookDetail.fulfilled, (state, action) => {\n      state.status = null;\n      state.bookDetail = action.payload;\n    }).addCase(getBookDetail.rejected, (state, action) => {\n      state.status = \"Failed to remove book\";\n    });\n  }\n});\nexport default bookSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","fetchBooks","toast","initialState","books","readinglist","bookDetail","status","addToReadingList","book","response","post","data","getReadingList","get","removeBook","removedBookId","delete","console","log","getBookDetail","bookId","fetchData","props","bookSlice","name","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","success","error","message","reducer"],"sources":["/Users/macbookpro/Documents/Cder/reactJS/M2.3/redux-book-store-toolkit/src/components/book/bookSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport api from \"../../apiService.js\";\nimport { fetchBooks } from \"./bookAPI\";\nimport { toast } from \"react-toastify\";\n\nconst initialState = {\n  books: [],\n  readinglist: [],\n  bookDetail: null,\n  status: null,\n};\n\nexport const addToReadingList = createAsyncThunk(\n  \"book/addToReadingList\",\n  async (book) => {\n    const response = await api.post(`/favorites`, book);\n    return response.data;\n  }\n);\nexport const getReadingList = createAsyncThunk(\n  \"book/getReadingList\",\n  async () => {\n    const response = await api.get(`/favorites`);\n    return response.data;\n  }\n);\nexport const removeBook = createAsyncThunk(\n  \"book/removeBook\",\n  async (removedBookId) => {\n    const response = await api.delete(`/favorites/${removedBookId}`);\n\n    console.log(response);\n    return response.data;\n  }\n);\nexport const getBookDetail = createAsyncThunk(\n  \"book/getBookDetail\",\n  async (bookId) => {\n    const response = await api.get(`/books/${bookId}`);\n    return response.data;\n  }\n);\nexport const fetchData = createAsyncThunk(\"book/fetchData\", async (props) => {\n  const response = await fetchBooks(props);\n  return response.data;\n});\nexport const bookSlice = createSlice({\n  name: \"book\",\n  initialState,\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchData.pending, (state) => {\n        state.status = \"loading\";\n      })\n      .addCase(fetchData.fulfilled, (state, action) => {\n        state.status = null;\n        state.books = action.payload;\n      })\n      .addCase(fetchData.rejected, (state, action) => {\n        state.status = \"failed\";\n      });\n    builder\n      .addCase(addToReadingList.pending, (state) => {})\n      .addCase(addToReadingList.fulfilled, (state, action) => {\n        console.log(action.payload);\n        toast.success(\"The book has been added to the reading list!\");\n      })\n      .addCase(addToReadingList.rejected, (state, action) => {\n        toast.error(action.error.message);\n      });\n    builder\n      .addCase(getReadingList.pending, (state) => {\n        state.status = \"pending\";\n      })\n      .addCase(getReadingList.fulfilled, (state, action) => {\n        state.status = null;\n        state.readinglist = action.payload;\n      })\n      .addCase(getReadingList.rejected, (state, action) => {\n        state.status = \"failed\";\n      });\n    builder\n      .addCase(removeBook.pending, (state) => {\n        state.status = \"pending\";\n      })\n      .addCase(removeBook.fulfilled, (state, action) => {\n        state.status = null;\n        toast.success(\"The book has been removed\");\n      })\n      .addCase(removeBook.rejected, (state, action) => {\n        state.status = \"Failed to remove book\";\n      });\n    builder\n      .addCase(getBookDetail.pending, (state) => {\n        state.status = \"pending\";\n      })\n      .addCase(getBookDetail.fulfilled, (state, action) => {\n        state.status = null;\n        state.bookDetail = action.payload;\n      })\n      .addCase(getBookDetail.rejected, (state, action) => {\n        state.status = \"Failed to remove book\";\n      });\n  },\n});\n\nexport default bookSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}